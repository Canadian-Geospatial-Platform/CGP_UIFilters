<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

    <title>CGP Searching Filtering</title>

  <link href="bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="bootstrap/site/css/mycss.css" rel="stylesheet">



<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

	</head><div class="row">

	</div>

  <body>
<div class="container-fluid">
	<div class="row justify-content-center">
											<div class="col-12 col-md-10 col-lg-8">
													<form class="card card-sm">
															<div class="card-body row no-gutters align-items-center">
																	<div class="col-auto">
																			<i class="fas fa-search h4 text-body"></i>
																	</div>
																	<!--end of col-->
																	<div class="col">
																			<input id="searchcontent" class="form-control form-control-lg form-control-borderless" type="search" placeholder="Search topics or keywords">
																	</div>
																	<!--end of col-->
																	<div class="col-auto">
																			<button id="btnsearchbykeyboard"  class="btn btn-lg btn-success" type="submit">Search</button>
																	</div>
																	<!--end of col-->
															</div>
													</form>
											</div>
											<!--end of col-->
									</div>
                    <div class="row">
                      <div class="col-2"></div>
                      <div class="col-10 alert alert-warning alert-dimissible fade show close" id="ResultFilterTop" >
                      </div>
                    </div>
									<div class="row">
								 		<div class="col-4 col-md-3 col-lg-4">
								 			<div id="accordion" class="panel panel-primary behclick-panel">
								 				<div class="panel-heading">
                          <div class="row">
                            <div class="col-6">
                            <h4 class="panel-title">Search Filters</h4>
                            </div>
                            <div class="col-4">
                              <button type="button" id="btntclearfilter" class="btn btn-link btn-xs">Clear filters</button>
                              </div>
                          </div>
								 				</div>

								 				<div class="panel-body" >
								 					<div class="panel-heading " >
								 						<h4 class="panel-title">
								 							<a data-toggle="collapse" href="#collapse0">
								 								<i class="indicator fa fa-caret-right" aria-hidden="true"></i> Filters by Resource Type
								 							</a>
								 						</h4>
								 					</div>
								 					<div id="collapse0" class="panel-collapse collapse">
                            <div id="checkFRT">
								 						<ul class="list-group">
								 							<li class="list-group-item">
								 								<div class="checkbox">
								 									<label for="DataSet">
								 										<input type="checkbox" class="checkme" id="DataSet" value="1">
								 										DataSet
								 									</label>
								 								</div>
								 							</li>
								 							<li class="list-group-item">
								 								<div class="checkbox" >
								 									<label for="webServices">
								 										<input class="checkme"  type="checkbox" id="WebServices" value="2">
								 										Web Services
								 									</label>
								 								</div>
								 							</li>
								 							<li class="list-group-item">
								 								<div class="checkbox">
								 									<label for="Application">
								 										<input class="checkme"  type="checkbox" id="Application"  value="3">
								 										Application
								 									</label>
								 								</div>
								 							</li>
								 							<li class="list-group-item">
								 								<div class="checkbox">
								 									<label for="API">
								 										<input class="checkme"  type="checkbox" id="API" value="4">
								 									API
								 									</label>
								 								</div>
								 							</li>
															<li class="list-group-item">
																<div class="checkbox"  >
																	<label for="GuideDocument">
																		<input class="checkme"  type="checkbox" id="GuideDocument" value="5">
																Guide Document
																	</label>
																</div>
															</li>
								 						</ul>
                            </div>
								 					</div>

								 					<div class="panel-heading " >
								 						<h4 class="panel-title">
								 							<a data-toggle="collapse" href="#collapse1">
								 								<i class="indicator fa fa-caret-right" aria-hidden="true"></i> Filters by Format
								 							</a>
								 						</h4>
								 					</div>
								 					<div id="collapse1" class="panel-collapse collapse" >
								 						<ul class="list-group">
								 							<li class="list-group-item">
								 								<div class="checkbox">
								 									<label for="ESRIREST">
								 										<input class="checkme" type="checkbox" value="" id="ESRIREST">
								 										ESRI | REST
								 									</label>
								 								</div>
								 							</li>
								 							<li class="list-group-item">
								 								<div class="checkbox" >
								 									<label for="FGDBGDB">
								 										<input type="checkbox" class="checkme" id="FGDBGDB" value="">
								 									 FGDB/GDB
								 									</label>
								 								</div>
								 							</li>
								 							<li class="list-group-item">
								 								<div class="checkbox"  >
								 									<label for="GEJSON">
								 										<input class="checkme" type="checkbox" id="GEOJSON" value="">
								 										GEOJSON
								 									</label>
								 								</div>
								 							</li>
															<li class="list-group-item">
																<div class="checkbox">
																	<label for="GML">
																		<input class="checkme" type="checkbox" id="GML"value="">
																		GML
																	</label>
																</div>
															</li>
                              <div>
															<span id="filtermore">
																<li class="list-group-item">
																	<div class="checkbox">
																		<label for="GEOTIF">
																			<input class="checkme" type="checkbox" id="GEOTIF" value="">
																			Geo Tif
																		</label>
																	</div>
																</li>
																<li class="list-group-item">
																	<div class="checkbox"  >
																		<label for="JSON">
																			<input class="checkme" type="checkbox" value="" id="JSON">
																			Json
																		</label>
																	</div>
																</li>
																<li class="list-group-item">
																	<div class="checkbox">
																		<label for="ESRIREST">
																			<input class="checkme" type="checkbox" value="" id="ESRIREST">
																			ESRI|REST
																		</label>
																	</div>
																</li>
                              </span>
															</div>
                              <div class="row">
                                  <div class="col-md-6">
                              <button type="button" id="btntoggle" class="btn btn-link btn-xs">Show More	</button>
                              </div></div>
														</div>
								 						</ul>
								 					</div>
								 					<div class="panel-heading" >
								 						<h4 class="panel-title">
								 							<a data-toggle="collapse" href="#collapse2">
                                <i class="indicator fa fa-caret-right" aria-hidden="true"></i> Filters by Time</a>
								 						</h4>
								 					</div>
								 					<div id="collapse2" class="panel-collapse collapse">
								 						<ul class="list-group">
								 							<li class="list-group-item">
								 								<div class="checkbox">
								 									<label>
								 										<input  type="checkbox" value="">
								 									</label>
								 								</div>
								 							</li>

								 						</ul>
								 					</div>
								 					<div class="panel-heading" >
								 						<h4 class="panel-title">
								 							<a data-toggle="collapse" href="#collapse3">
                                <i class="indicator fa fa-caret-right" aria-hidden="true"></i> Filters by Source</a>
								 						</h4>
								 					</div>
								 					<div id="collapse3" class="panel-collapse collapse">
								 						<ul class="list-group">
								 							<li class="list-group-item">
								 								<div class="checkbox">
								 									<label for="AFFC">
								 											<input class="checkme" type="checkbox" value="" id="AFFC">
								 										Agriculture and Agri-Food Canada
								 									</label>
								 								</div>
								 							</li>
								 							<li class="list-group-item">
								 								<div class="checkbox" >
								 									<label for="CFIA">
								 										<input class="checkme"  type="checkbox" value="" id="CFIA">
								 										Canadian Food Inspection Agency
								 									</label>
								 								</div>
								 							</li>
								 							<li class="list-group-item">
								 								<div class="checkbox">
								 									<label for="CNSC">
								 										<input class="checkme" type="checkbox" value="Canadian Nuclear  Safety Commision" id="CNSC">
								 									 Canadian Nuclear  Safety Commision
								 									</label>
								 								</div>
								 							</li>
															<li class="list-group-item">
																<div class="checkbox">
																	<label for="CSA">
																		<input class="checkme" type="checkbox" value="" id="CSA">
																	 Canadian Space Agency
																	</label>
																</div>
															</li>
                              <div>
															<span id="filtermoresource">
															<li class="list-group-item">
																<div class="checkbox">
																	<label for="CIRNAC">
																		<input class="checkme" type="checkbox" value="" id="CIRNAC">
																	 Crown-indegenuos Relations and Northen Affairs Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="Election Canada">
																		<input class="checkme" type="checkbox" value="" id="Election Canada">
																	 Election Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="ESDC">
																		<input class="checkme" type="checkbox" value="" id="ESDC">
																	 Employment and Social Development Canada
																</label>
                              </Dataset div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="ECCC">
																		<input class="checkme" type="checkbox" value="" id="ECCC">
																	 Enviroment and Climate Change Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="FOC">
																		<input class="checkme" type="checkbox" value="" id="FOC">
																	 Fisheries and Oceans Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label id="GA">
																		<input class="checkme" type="checkbox" value="" id="GA">
																	 Government of Alberta
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="GBC">
																		<input class="checkme" type="checkbox" value="" id="GBC">
																	 Government of British Columbia
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="HC">
																		<input class="checkme" type="checkbox" value="" id="HC">
																	 Health Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="IAAC">
																		<input class="checkme" type="checkbox" value="" id="IAAC">
																	 Impact Assessment Agency of Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="NRCC">
																		<input class="checkme" type="checkbox" value="" id="NRCC">
																	 National Research Council Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="NCR">
																		<input class="checkme"  type="checkbox" value="" id="NRC">
																	 Natural Resources Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div  class="checkbox">
																	<label for="PC">
																		<input class="checkme" type="checkbox" value="" id="PC">
																	 Parks Canada
																	</label>
																</div>
															</li>
                              <li class="list-group-item">
																<div class="checkbox">
																	<label for="PHAC">
																		<input class="checkme" type="checkbox" value="" id="PHAC">
																	 Public Health Agency of Canada
                                 </label>
																</div>
															</li>
                              <li class="list-group-item">
                                <div class="checkbox">
                                  <label for="STATCAN">
                                    <input class="checkme" type="checkbox" value="" id="STATCAN">
                                   Statistics Canada
                                 </label>
                                </div>
                              </li>
                              <li class="list-group-item">
                                <div class="checkbox">
                                  <label for="TC">
                                    <input class="checkme" type="checkbox" value="" id="TC">
                                   Transport Canada
                                 </label>
                                </div>
                              </li>
                              <li class="list-group-item">
                                <div class="checkbox">
                                  <label for="VAC">
                                    <input class="checkme" type="checkbox" value="" id="VAC">
                                   Veterans Affairs Canada
                                 </label>
                                </div>
                              </li>
                              <li class="list-group-item">
                                <div class="checkbox">
                                  <label>
                                    <input class="checkme" type="checkbox" value="" id="Other">
                                   Other
                                 </label>
                                </div>
                              </li>
                            </span>
                          </div>
                          <div class="row">
		                          <div class="col-md-6">
                          <button type="button" id="btntogglesource" class="btn btn-link btn-xs">Show More</button>
                              </div>
                             </div>
								 						</ul>
								 					</div>
								 				</div>
								 			</div>
                      <div class="col-8 col-md-8 col-lg-8">
                        <div class="jumbotron jumbotron-fluid">
                            <h4 class="display-4">Result</h4>
                            <p class="lead">.</p>
                          </div>
                      </div>
								 		</div>
								 	</div>
</div>
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="https://code.jquery.com/jquery-3.4.1.js"><\/script>')</script>
<script src="node_modules/popper/dist/popper.min.js"></script>
<script src="bootstrap/dist/js/bootstrap.min.js"></script>
  <!-- <script src="bootstrap/assets/js/vendor/holder.min.js"></script> /node_modules/jquery/dist/jquery.min.js-->

<script>
	// Holder.addTheme('thumb', {
	// 	bg: '#55595c',
	// 	fg: '#eceeef',
	// 	text: 'Thumbnail'
	// });index1.html#collapse2
  $(document).ready(function() {
    var n=0;
    $("#btntclearfilter").hide();
    JSonObj=new Array();

    $("#btntoggle").click(function() {
      var elem = $("#btntoggle").text();
      console.log(elem)
      if (elem == "Show More") {
        //Stuff to do when btn is in the read more state
        $("#btntoggle").text("Show Less");
        $("#filtermore").slideDown();

      } else {
        //Stuff to do when checkboxbtn is in the read less state
        $("#btntoggle").text("Show More");
        $("#filtermore").slideUp();
      }
    });
    $("#btntogglesource").click(function() {

      var elems = $("#btntogglesource").text();
      console.log(elems)
      if (elems == "Show More") {
        //Stuff to do when btn is in the read more state
        $("#btntogglesource").text("Show Less");
        $("#filtermoresource").slideDown();
$(this)
      } else {
        //Stuff to do when btn is in the read less state
        $("#btntogglesource").text("Show More");
        $("#filtermoresource").slideUp();
      }
    });
    $(".checkme").change(function(e) {

      if ($(this).is(":checked")) {
       $('#ResultFilterTop').append(
        '<label   id='+ $(this).attr("id") +' class="btn btn-info close"  aria-label="Close">'+ $(this).attr("id") +'  '+'<span class="fa fa-times"></span> </label>' + "  "
        );
         n=n+1
          $("#btntclearfilter").show();
          items={}
          items["id"]=$(this).attr("value");
          items["title"]=$(this).attr("id");
          JSonObj.push(items);
          console.log(JSonObj);
          $("#"+$(this).attr("id")).click(function(){
            $("#"+$(this).attr("id")).remove();
             n=n-1
             if (n===0)   $("#btntclearfilter").hide();
            $("#"+$(this).attr("id")).prop('checked',false);
        })
     }
       else {
         //remove
         $("#"+$(this).attr("id")).remove();
          n=n-1
          if (n===0)   $("#btntclearfilter").hide();
        }
        SendtToAWSAPI();
    })//end   $(".checkme").change()

   $("#btnsearchbykeyboard").click(function(){
     items={}
     items["id"]=0;
     items["search"]=$("#searchcontent").val();
     JSonObj.push(items);
      //console.log($("#searchcontent").val());
      SendtToAWSAPI();
   })

   $("#btntclearfilter").click(function(e){
     $("#searchcontent").val(" ");
     JSonObj=[];
      $('.btn-info').each(function(index,value){
      //  console.log(value);
        $(value).remove();
      })
      $(".checkme").each(function(index,value){
          $(value).prop('checked',false);
      })
      $("#btntclearfilter").hide();
   })
  });

  function SendtToAWSAPI(){
    var JsonString=JSON.stringify(JSonObj);
      // console.log(JsonString);
         console.log(JSonObj);
    $.ajax(
      {
      url:'https://url-apiv1',
      headers:{'Content-type':'application/json',
              'Access-Control-Allow-Origin':'*'
              },
      CrossDomain:true,
      Type:'POST',
      dataType:'application/jSon',
      data:JsonString,
      Success:function(data){
        console.log(data);
      },
      error: function(data){
        console.log("error = "+JSON.stringify(data));
      }
    })//end $.ajax

  }
	function toggleChevron(e) {
		$(e.target)
				.prev('.panel-heading')
				.find("i.indicator")
				.toggleClass('fa-caret-down fa-caret-right');
	}
	$('#accordion').on('hidden.bs.collapse', toggleChevron);
	$('#accordion').on('shown.bs.collapse', toggleChevron);

</script>
</body>
</html>
